
> profe-ai@1.0.0 test:coverage:check
> vitest run --coverage

Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#addon-test-indexing-behavior-of-storybookaddon-test-is-changed

[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90m/Users/elena/Developer/ProfeAI/frontend[39m
      [2mCoverage enabled with [22m[33mv8[39m

Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#addon-test-indexing-behavior-of-storybookaddon-test-is-changed
 [31mâ¯[39m [30m[43m 0 [49m[39m src/tests/services/DialogueGenerator.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m [30m[43m 0 [49m[39m src/tests/services/ConversationService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m [30m[43m 0 [49m[39m src/tests/services/GrammarService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m [30m[43m 0 [49m[39m src/tests/services/TTSService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/flashcard/FlashcardAudioButtons.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 30[2mms[22m[39m
[90mstdout[2m | src/tests/components/auth/AuthForms.test.tsx[2m > [22m[2mAuthentication Forms Integration[2m > [22m[2mSignInForm[2m > [22m[2mdisables submit button and shows loading state on submission
[22m[39mğŸ“ [SignInForm] handleCustomSubmit called with data: {
  email: [32m'test@example.com'[39m,
  password: [32m'password123'[39m,
  rememberMe: [33mfalse[39m
}

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mdevuelve una funciÃ³n speak y currentProvider
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2musa backend TTS cuando estÃ¡ disponible
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el backend falla
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el servidor no estÃ¡ disponible
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mactualiza currentProvider segÃºn el proveedor usado
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mdetiene el audio actual antes de reproducir uno nuevo
[22m[39mThe above error occurred in the <TestComponent> component:

    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/components/auth/AuthForms.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 237[2mms[22m[39m
 [31mâ¯[39m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 51[2mms[22m[39m
[31m     [31mÃ—[31m devuelve una funciÃ³n speak y currentProvider[39m[32m 32[2mms[22m[39m
[31m     [31mÃ—[31m usa backend TTS cuando estÃ¡ disponible[39m[32m 7[2mms[22m[39m
[31m     [31mÃ—[31m hace fallback a Web Speech API cuando el backend falla[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m hace fallback a Web Speech API cuando el servidor no estÃ¡ disponible[39m[32m 2[2mms[22m[39m
[31m     [31mÃ—[31m actualiza currentProvider segÃºn el proveedor usado[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m detiene el audio actual antes de reproducir uno nuevo[39m[32m 2[2mms[22m[39m
[90mstderr[2m | src/tests/components/DialogueViewer.test.tsx[2m > [22m[2mDialogueViewer[2m > [22m[2mcalls speak when the audio button is clicked
[22m[39mWarning: An update to DialogueViewer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at DialogueViewer (/Users/elena/Developer/ProfeAI/frontend/src/components/DialogueViewer.tsx:8:27)

 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/flashcard/FlashcardActions.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/components/DialogueViewer.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/flashcard/Flashcard.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/pages/ProfilePage.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/flashcard/FlashcardTranslation.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/services/UserService.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 13[2mms[22m[39m
[90mstdout[2m | src/tests/services/LessonService.test.ts[2m > [22m[2mLessonService[2m > [22m[2msetLesson[2m > [22m[2mshould write lesson data
[22m[39mLesson lesson_id written successfully.

 [32mâœ“[39m [30m[43m 0 [49m[39m src/tests/services/LessonService.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [2m[90mâ†“[39m[22m [30m[43m 0 [49m[39m src/tests/flashcard/integration/FlashcardFlow.integration.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardActions.stories.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 422[2mms[22m[39m
   [33m[2mâœ“[22m[39m Default [33m 367[2mms[22m[39m
[90mstderr[2m | src/stories/ConversationMode.stories.tsx[2m > [22m[2mDefault
[22m[39m[Error: Uncaught Error: useAuth must be used within an AuthProvider]
[90mstderr[2m | src/stories/ConversationMode.stories.tsx[2m > [22m[2mDefault
[22m[39m[Error: Uncaught Error: useAuth must be used within an AuthProvider]
[90mstderr[2m | src/stories/ConversationMode.stories.tsx[2m > [22m[2mDefault
[22m[39mThe above error occurred in the <ConversationMode> component:

    at ConversationMode (http://localhost:63315/src/components/ConversationMode.tsx:7:36)
    at hookified (http://localhost:63315/node_modules/.cache/storybook/c91fe8217320b1e52f2adda2c88f3efe81206e541e2dcfab6cfff87499b00884/sb-vitest/deps/chunk-YEN6LSBV.js?v=8d35187c:6833:11)
    at unboundStoryFn (http://localhost:63315/node_modules/.cache/storybook/c91fe8217320b1e52f2adda2c88f3efe81206e541e2dcfab6cfff87499b00884/sb-vitest/deps/chunk-YEN6LSBV.js?v=8d35187c:7338:245)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardAudioButtons.stories.tsx [2m([22m[2m1 test[22m[2m)[22m[33m 354[2mms[22m[39m
   [33m[2mâœ“[22m[39m Default [33m 353[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/AuthForms.stories.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 431[2mms[22m[39m
   [33m[2mâœ“[22m[39m Login [33m 350[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/Flashcard.stories.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 424[2mms[22m[39m
   [33m[2mâœ“[22m[39m Default [33m 362[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/DialogueGenerator.stories.tsx [2m([22m[2m1 test[22m[2m)[22m[33m 380[2mms[22m[39m
   [33m[2mâœ“[22m[39m Default [33m 378[2mms[22m[39m
 [31mâ¯[39m [30m[45m storybook (chromium) [49m[39m src/stories/ConversationMode.stories.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 152[2mms[22m[39m
[31m   [31mÃ—[31m Default[39m[32m 150[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/Button.stories.js [2m([22m[2m5 tests[22m[2m)[22m[33m 644[2mms[22m[39m
   [33m[2mâœ“[22m[39m Primary [33m 464[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/TailwindTest.stories.jsx [2m([22m[2m1 test[22m[2m)[22m[32m 277[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardText.stories.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 301[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/GrammarReport.stories.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 365[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/Header.stories.js [2m([22m[2m2 tests[22m[2m)[22m[32m 256[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/Page.stories.js [2m([22m[2m2 tests[22m[2m)[22m[33m 321[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/Navbar.stories.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 209[2mms[22m[39m
 [32mâœ“[39m [30m[45m storybook (chromium) [49m[39m src/stories/Sidebar.stories.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 238[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 4 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/services/ConversationService.test.ts[2m [ src/tests/services/ConversationService.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "../../services/ConversationService" from "src/tests/services/ConversationService.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/Users/elena/Developer/ProfeAI/frontend/src/tests/services/ConversationService.test.ts[39m:2:0
[33m  11 |    })
  12 |  }));
  13 |  const __vi_import_0__ = await import("../../services/ConversationService");
     |                                       ^
  14 |  import { describe, it, expect, vi, beforeEach } from "vitest";
  15 |  [39m
[90m [2mâ¯[22m TransformPluginContext._formatLog ../node_modules/vite/dist/node/chunks/config.js:[2m29647:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../node_modules/vite/dist/node/chunks/config.js:[2m29644:14[22m[39m
[90m [2mâ¯[22m normalizeUrl ../node_modules/vite/dist/node/chunks/config.js:[2m27767:18[22m[39m
[90m [2mâ¯[22m ../node_modules/vite/dist/node/chunks/config.js:[2m27825:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../node_modules/vite/dist/node/chunks/config.js:[2m27793:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform ../node_modules/vite/dist/node/chunks/config.js:[2m29445:14[22m[39m
[90m [2mâ¯[22m loadAndTransform ../node_modules/vite/dist/node/chunks/config.js:[2m23316:26[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/services/DialogueGenerator.test.ts[2m [ src/tests/services/DialogueGenerator.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "../../services/DialogueGenerator" from "src/tests/services/DialogueGenerator.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/Users/elena/Developer/ProfeAI/frontend/src/tests/services/DialogueGenerator.test.ts[39m:2:0
[33m  2  |    dialogueFlow: vi.fn((...args) => mockDialogueFlow(...args))
  3  |  }));
  4  |  const __vi_import_0__ = await import("../../services/DialogueGenerator");
     |                                       ^
  5  |  import { describe, it, expect, vi, beforeEach } from "vitest";
  6  |  [39m
[90m [2mâ¯[22m TransformPluginContext._formatLog ../node_modules/vite/dist/node/chunks/config.js:[2m29647:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../node_modules/vite/dist/node/chunks/config.js:[2m29644:14[22m[39m
[90m [2mâ¯[22m normalizeUrl ../node_modules/vite/dist/node/chunks/config.js:[2m27767:18[22m[39m
[90m [2mâ¯[22m ../node_modules/vite/dist/node/chunks/config.js:[2m27825:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../node_modules/vite/dist/node/chunks/config.js:[2m27793:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform ../node_modules/vite/dist/node/chunks/config.js:[2m29445:14[22m[39m
[90m [2mâ¯[22m loadAndTransform ../node_modules/vite/dist/node/chunks/config.js:[2m23316:26[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/services/GrammarService.test.ts[2m [ src/tests/services/GrammarService.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "../../services/GrammarService" from "src/tests/services/GrammarService.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/Users/elena/Developer/ProfeAI/frontend/src/tests/services/GrammarService.test.ts[39m:2:27
[33m  1  |  import { describe, it, expect } from "vitest";
  2  |  import GrammarService from "../../services/GrammarService";
     |                              ^
  3  |  describe("GrammarService", () => {
  4  |    describe("analyze", () => {[39m
[90m [2mâ¯[22m TransformPluginContext._formatLog ../node_modules/vite/dist/node/chunks/config.js:[2m29647:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../node_modules/vite/dist/node/chunks/config.js:[2m29644:14[22m[39m
[90m [2mâ¯[22m normalizeUrl ../node_modules/vite/dist/node/chunks/config.js:[2m27767:18[22m[39m
[90m [2mâ¯[22m ../node_modules/vite/dist/node/chunks/config.js:[2m27825:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../node_modules/vite/dist/node/chunks/config.js:[2m27793:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform ../node_modules/vite/dist/node/chunks/config.js:[2m29445:14[22m[39m
[90m [2mâ¯[22m loadAndTransform ../node_modules/vite/dist/node/chunks/config.js:[2m23316:26[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/services/TTSService.test.ts[2m [ src/tests/services/TTSService.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "../../services/TTSService" from "src/tests/services/TTSService.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/Users/elena/Developer/ProfeAI/frontend/src/tests/services/TTSService.test.ts[39m:58:0
[33m  36 |  }));
  37 |  const __vi_import_0__ = await import("node-fetch");
  38 |  const __vi_import_1__ = await import("../../services/TTSService");
     |                                       ^
  39 |  import { describe, it, expect, vi, beforeEach } from "vitest";
  40 |  [39m
[90m [2mâ¯[22m TransformPluginContext._formatLog ../node_modules/vite/dist/node/chunks/config.js:[2m29647:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../node_modules/vite/dist/node/chunks/config.js:[2m29644:14[22m[39m
[90m [2mâ¯[22m normalizeUrl ../node_modules/vite/dist/node/chunks/config.js:[2m27767:18[22m[39m
[90m [2mâ¯[22m ../node_modules/vite/dist/node/chunks/config.js:[2m27825:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../node_modules/vite/dist/node/chunks/config.js:[2m27793:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform ../node_modules/vite/dist/node/chunks/config.js:[2m29445:14[22m[39m
[90m [2mâ¯[22m loadAndTransform ../node_modules/vite/dist/node/chunks/config.js:[2m23316:26[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/11]â¯[22m[39m


[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 7 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts[2m > [22museTTS[2m > [22mdevuelve una funciÃ³n speak y currentProvider
[31m[1mError[22m: useAuth must be used within an AuthProvider[39m
[36m [2mâ¯[22m useAuth src/hooks/useAuth.ts:[2m13:11[22m[39m
    [90m 11| [39m
    [90m 12| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m 13| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m"useAuth must be used within an AuthProvider"[39m)[33m;[39m
    [90m   | [39m          [31m^[39m
    [90m 14| [39m  }
    [90m 15| [39m
[90m [2mâ¯[22m useTTS src/components/hooks/useTTS.tsx:[2m555:33[22m[39m
[90m [2mâ¯[22m src/tests/flashcard/useTTS.test.ts:[2m65:41[22m[39m
[90m [2mâ¯[22m TestComponent ../node_modules/@testing-library/react/dist/pure.js:[2m331:27[22m[39m
[90m [2mâ¯[22m renderWithHooks ../node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2mâ¯[22m mountIndeterminateComponent ../node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2mâ¯[22m beginWork ../node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.callCallback ../node_modules/react-dom/cjs/react-dom.development.js:[2m4164:14[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.#callDispatchEventListeners ../node_modules/happy-dom/lib/event/EventTarget.js:[2m237:34[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.dispatchEvent ../node_modules/happy-dom/lib/event/EventTarget.js:[2m100:41[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts[2m > [22museTTS[2m > [22musa backend TTS cuando estÃ¡ disponible
[31m[1mError[22m: useAuth must be used within an AuthProvider[39m
[36m [2mâ¯[22m useAuth src/hooks/useAuth.ts:[2m13:11[22m[39m
    [90m 11| [39m
    [90m 12| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m 13| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m"useAuth must be used within an AuthProvider"[39m)[33m;[39m
    [90m   | [39m          [31m^[39m
    [90m 14| [39m  }
    [90m 15| [39m
[90m [2mâ¯[22m useTTS src/components/hooks/useTTS.tsx:[2m555:33[22m[39m
[90m [2mâ¯[22m src/tests/flashcard/useTTS.test.ts:[2m79:41[22m[39m
[90m [2mâ¯[22m TestComponent ../node_modules/@testing-library/react/dist/pure.js:[2m331:27[22m[39m
[90m [2mâ¯[22m renderWithHooks ../node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2mâ¯[22m mountIndeterminateComponent ../node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2mâ¯[22m beginWork ../node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.callCallback ../node_modules/react-dom/cjs/react-dom.development.js:[2m4164:14[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.#callDispatchEventListeners ../node_modules/happy-dom/lib/event/EventTarget.js:[2m237:34[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.dispatchEvent ../node_modules/happy-dom/lib/event/EventTarget.js:[2m100:41[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts[2m > [22museTTS[2m > [22mhace fallback a Web Speech API cuando el backend falla
[31m[1mError[22m: useAuth must be used within an AuthProvider[39m
[36m [2mâ¯[22m useAuth src/hooks/useAuth.ts:[2m13:11[22m[39m
    [90m 11| [39m
    [90m 12| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m 13| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m"useAuth must be used within an AuthProvider"[39m)[33m;[39m
    [90m   | [39m          [31m^[39m
    [90m 14| [39m  }
    [90m 15| [39m
[90m [2mâ¯[22m useTTS src/components/hooks/useTTS.tsx:[2m555:33[22m[39m
[90m [2mâ¯[22m src/tests/flashcard/useTTS.test.ts:[2m103:41[22m[39m
[90m [2mâ¯[22m TestComponent ../node_modules/@testing-library/react/dist/pure.js:[2m331:27[22m[39m
[90m [2mâ¯[22m renderWithHooks ../node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2mâ¯[22m mountIndeterminateComponent ../node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2mâ¯[22m beginWork ../node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.callCallback ../node_modules/react-dom/cjs/react-dom.development.js:[2m4164:14[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.#callDispatchEventListeners ../node_modules/happy-dom/lib/event/EventTarget.js:[2m237:34[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.dispatchEvent ../node_modules/happy-dom/lib/event/EventTarget.js:[2m100:41[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts[2m > [22museTTS[2m > [22mhace fallback a Web Speech API cuando el servidor no estÃ¡ disponible
[31m[1mError[22m: useAuth must be used within an AuthProvider[39m
[36m [2mâ¯[22m useAuth src/hooks/useAuth.ts:[2m13:11[22m[39m
    [90m 11| [39m
    [90m 12| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m 13| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m"useAuth must be used within an AuthProvider"[39m)[33m;[39m
    [90m   | [39m          [31m^[39m
    [90m 14| [39m  }
    [90m 15| [39m
[90m [2mâ¯[22m useTTS src/components/hooks/useTTS.tsx:[2m555:33[22m[39m
[90m [2mâ¯[22m src/tests/flashcard/useTTS.test.ts:[2m126:41[22m[39m
[90m [2mâ¯[22m TestComponent ../node_modules/@testing-library/react/dist/pure.js:[2m331:27[22m[39m
[90m [2mâ¯[22m renderWithHooks ../node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2mâ¯[22m mountIndeterminateComponent ../node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2mâ¯[22m beginWork ../node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.callCallback ../node_modules/react-dom/cjs/react-dom.development.js:[2m4164:14[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.#callDispatchEventListeners ../node_modules/happy-dom/lib/event/EventTarget.js:[2m237:34[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.dispatchEvent ../node_modules/happy-dom/lib/event/EventTarget.js:[2m100:41[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts[2m > [22museTTS[2m > [22mactualiza currentProvider segÃºn el proveedor usado
[31m[1mError[22m: useAuth must be used within an AuthProvider[39m
[36m [2mâ¯[22m useAuth src/hooks/useAuth.ts:[2m13:11[22m[39m
    [90m 11| [39m
    [90m 12| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m 13| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m"useAuth must be used within an AuthProvider"[39m)[33m;[39m
    [90m   | [39m          [31m^[39m
    [90m 14| [39m  }
    [90m 15| [39m
[90m [2mâ¯[22m useTTS src/components/hooks/useTTS.tsx:[2m555:33[22m[39m
[90m [2mâ¯[22m src/tests/flashcard/useTTS.test.ts:[2m155:41[22m[39m
[90m [2mâ¯[22m TestComponent ../node_modules/@testing-library/react/dist/pure.js:[2m331:27[22m[39m
[90m [2mâ¯[22m renderWithHooks ../node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2mâ¯[22m mountIndeterminateComponent ../node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2mâ¯[22m beginWork ../node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.callCallback ../node_modules/react-dom/cjs/react-dom.development.js:[2m4164:14[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.#callDispatchEventListeners ../node_modules/happy-dom/lib/event/EventTarget.js:[2m237:34[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.dispatchEvent ../node_modules/happy-dom/lib/event/EventTarget.js:[2m100:41[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts[2m > [22museTTS[2m > [22mdetiene el audio actual antes de reproducir uno nuevo
[31m[1mError[22m: useAuth must be used within an AuthProvider[39m
[36m [2mâ¯[22m useAuth src/hooks/useAuth.ts:[2m13:11[22m[39m
    [90m 11| [39m
    [90m 12| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m 13| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m"useAuth must be used within an AuthProvider"[39m)[33m;[39m
    [90m   | [39m          [31m^[39m
    [90m 14| [39m  }
    [90m 15| [39m
[90m [2mâ¯[22m useTTS src/components/hooks/useTTS.tsx:[2m555:33[22m[39m
[90m [2mâ¯[22m src/tests/flashcard/useTTS.test.ts:[2m189:41[22m[39m
[90m [2mâ¯[22m TestComponent ../node_modules/@testing-library/react/dist/pure.js:[2m331:27[22m[39m
[90m [2mâ¯[22m renderWithHooks ../node_modules/react-dom/cjs/react-dom.development.js:[2m15486:18[22m[39m
[90m [2mâ¯[22m mountIndeterminateComponent ../node_modules/react-dom/cjs/react-dom.development.js:[2m20103:13[22m[39m
[90m [2mâ¯[22m beginWork ../node_modules/react-dom/cjs/react-dom.development.js:[2m21626:16[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.callCallback ../node_modules/react-dom/cjs/react-dom.development.js:[2m4164:14[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.#callDispatchEventListeners ../node_modules/happy-dom/lib/event/EventTarget.js:[2m237:34[22m[39m
[90m [2mâ¯[22m HTMLUnknownElement.dispatchEvent ../node_modules/happy-dom/lib/event/EventTarget.js:[2m100:41[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[10/11]â¯[22m[39m

[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/ConversationMode.stories.tsx[2m > [22mDefault
[31m[1mError[22m: 
[34mClick to debug the error directly in Storybook: http://localhost:6006/?path=/story/components-conversationmode--default&addonPanel=storybook/interactions/panel[31m

useAuth must be used within an AuthProvider[39m
[36m [2mâ¯[22m useAuth src/hooks/useAuth.ts:[2m13:10[22m[39m
    [90m 11| [39m
    [90m 12| [39m  [35mif[39m (context [33m===[39m undefined) {
    [90m 13| [39m    [35mthrow[39m [35mnew[39m [33mError[39m([32m"useAuth must be used within an AuthProvider"[39m)[33m;[39m
    [90m   | [39m         [31m^[39m
    [90m 14| [39m  }
    [90m 15| [39m
[90m [2mâ¯[22m ConversationMode src/components/ConversationMode.tsx:[2m37:19[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[11/11]â¯[22m[39m


[2m Test Files [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m22 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (29)[39m
[2m      Tests [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m68 passed[39m[22m[2m | [22m[33m3 skipped[39m[90m (78)[39m
[2m   Start at [22m 20:18:14
[2m   Duration [22m 6.78s[2m (transform 2.28s, setup 7.90s, import 6.82s, tests 5.31s, environment 4.27s)[22m

npm error Lifecycle script `test:coverage:check` failed with error:
npm error code 1
npm error path /Users/elena/Developer/ProfeAI/frontend
npm error workspace profe-ai@1.0.0
npm error location /Users/elena/Developer/ProfeAI/frontend
npm error command failed
npm error command sh -c vitest run --coverage
