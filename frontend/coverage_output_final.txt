
> profe-ai@1.0.0 test:coverage:check
> vitest run --coverage

Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#addon-test-indexing-behavior-of-storybookaddon-test-is-changed

[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90m/Users/elena/Developer/ProfeAI/frontend[39m
      [2mCoverage enabled with [22m[33mv8[39m

Warning: Starting in Storybook 8.5.0-alpha.18, the "test.include" option in Vitest is discouraged in favor of just using the "stories" field in your Storybook configuration.

The values you passed to "test.include" will be ignored, please remove them from your Vitest configuration where the Storybook plugin is applied.

More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#addon-test-indexing-behavior-of-storybookaddon-test-is-changed
 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/flashcard/FlashcardTranslation.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstderr[2m | src/tests/components/DialogueViewer.test.tsx[2m > [22m[2mDialogueViewer[2m > [22m[2mcalls speak when the audio button is clicked
[22m[39mWarning: An update to DialogueViewer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at DialogueViewer (/Users/elena/Developer/ProfeAI/frontend/src/components/DialogueViewer.tsx:8:27)

 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/flashcard/Flashcard.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/components/DialogueViewer.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 45[2mms[22m[39m
 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/flashcard/FlashcardActions.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 44[2mms[22m[39m
[90mstdout[2m | src/tests/components/auth/AuthForms.test.tsx[2m > [22m[2mAuthentication Forms Integration[2m > [22m[2mSignInForm[2m > [22m[2mdisables submit button and shows loading state on submission
[22m[39müìù [SignInForm] handleCustomSubmit called with data: {
  email: [32m'test@example.com'[39m,
  password: [32m'password123'[39m,
  rememberMe: [33mfalse[39m
}

 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/components/auth/AuthForms.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 222[2mms[22m[39m
[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2musa backend TTS cuando est√° disponible
[22m[39müéôÔ∏è Attempting backend TTS...

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2musa backend TTS cuando est√° disponible
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2musa backend TTS cuando est√° disponible
[22m[39m‚úÖ TTS successful using elevenlabs

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el backend falla
[22m[39müéôÔ∏è Attempting backend TTS...

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el backend falla
[22m[39mAvailable Spanish voices: 1
‚ö†Ô∏è Using any premium voice (may not match gender): Google espa√±ol
üé§ Browser Voice Selected: Google espa√±ol (es-ES) - Gender: female
üë© Female voice parameters: rate=0.95, pitch=1.1

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el backend falla
[22m[39m‚ö†Ô∏è Backend TTS failed. Status: [90mundefined[39m
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el backend falla
[22m[39m‚úÖ Using Web Speech API fallback

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el servidor no est√° disponible
[22m[39müéôÔ∏è Attempting backend TTS...

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el servidor no est√° disponible
[22m[39mAvailable Spanish voices: 1
‚ö†Ô∏è Using any premium voice (may not match gender): Google espa√±ol
üé§ Browser Voice Selected: Google espa√±ol (es-ES) - Gender: female
üë© Female voice parameters: rate=0.95, pitch=1.1

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el servidor no est√° disponible
[22m[39m‚ö†Ô∏è Backend unreachable: Network error
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mhace fallback a Web Speech API cuando el servidor no est√° disponible
[22m[39m‚úÖ Using Web Speech API fallback

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mactualiza currentProvider seg√∫n el proveedor usado
[22m[39müéôÔ∏è Attempting backend TTS...

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mactualiza currentProvider seg√∫n el proveedor usado
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mactualiza currentProvider seg√∫n el proveedor usado
[22m[39m‚úÖ TTS successful using google

 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/pages/ProfilePage.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 25[2mms[22m[39m
[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mdetiene el audio actual antes de reproducir uno nuevo
[22m[39müéôÔ∏è Attempting backend TTS...

[90mstderr[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mdetiene el audio actual antes de reproducir uno nuevo
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (/Users/elena/Developer/ProfeAI/node_modules/@testing-library/react/dist/pure.js:329:5)

[90mstdout[2m | src/tests/flashcard/useTTS.test.ts[2m > [22m[2museTTS[2m > [22m[2mdetiene el audio actual antes de reproducir uno nuevo
[22m[39m‚úÖ TTS successful using elevenlabs

 [31m‚ùØ[39m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 90[2mms[22m[39m
     [32m‚úì[39m devuelve una funci√≥n speak y currentProvider[32m 8[2mms[22m[39m
[31m     [31m√ó[31m usa backend TTS cuando est√° disponible[39m[32m 10[2mms[22m[39m
     [32m‚úì[39m hace fallback a Web Speech API cuando el backend falla[32m 5[2mms[22m[39m
     [32m‚úì[39m hace fallback a Web Speech API cuando el servidor no est√° disponible[32m 5[2mms[22m[39m
     [32m‚úì[39m actualiza currentProvider seg√∫n el proveedor usado[32m 59[2mms[22m[39m
     [32m‚úì[39m detiene el audio actual antes de reproducir uno nuevo[32m 2[2mms[22m[39m
 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/services/UserService.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 18[2mms[22m[39m
[90mstdout[2m | src/tests/services/LessonService.test.ts[2m > [22m[2mLessonService[2m > [22m[2msetLesson[2m > [22m[2mshould write lesson data
[22m[39mLesson lesson_id written successfully.

 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/services/LessonService.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m [30m[43m 0 [49m[39m src/tests/flashcard/FlashcardAudioButtons.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [2m[90m‚Üì[39m[22m [30m[43m 0 [49m[39m src/tests/flashcard/integration/FlashcardFlow.integration.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m
Cannot parse /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:
Expression expected
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m (client) Pre-transform error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m (client) Pre-transform error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:26 PM[22m [31m[1m[vite][22m[39m (client) Pre-transform error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardActions.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/AuthForms.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/DialogueGenerator.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/Button.stories.js [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/Flashcard.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/ConversationMode.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/GrammarReport.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
Cannot parse /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:
Expression expected
[2m8:22:27 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:27 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:27 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:27 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:27 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:27 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
[2m8:22:27 PM[22m [31m[1m[vite][22m[39m Internal server error: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.
  Plugin: vite:import-analysis
  File: /Users/elena/Developer/ProfeAI/frontend/.storybook/preview.js:22:22
  20 |    decorators: [Story => <AuthProvider>
  21 |          <Story />
  22 |        </AuthProvider>]
     |                        ^
  23 |  };
  24 |  export default preview;
      at TransformPluginContext._formatLog (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29647:43)
      at TransformPluginContext.error (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29644:14)
      at TransformPluginContext.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:27730:10)
      at EnvironmentPluginContainer.transform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:29445:14)
      at loadAndTransform (file:///Users/elena/Developer/ProfeAI/node_modules/vite/dist/node/chunks/config.js:23316:26)
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardText.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/Sidebar.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/Header.stories.js [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardAudioButtons.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/Navbar.stories.tsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/TailwindTest.stories.jsx [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m [30m[45m storybook (chromium) [49m[39m src/stories/Page.stories.js [2m([22m[2m0 test[22m[2m)[22m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Suites 14 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/AuthForms.stories.tsx[2m [ src/stories/AuthForms.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/Button.stories.js[2m [ src/stories/Button.stories.js ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/ConversationMode.stories.tsx[2m [ src/stories/ConversationMode.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/DialogueGenerator.stories.tsx[2m [ src/stories/DialogueGenerator.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/Flashcard.stories.tsx[2m [ src/stories/Flashcard.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardActions.stories.tsx[2m [ src/stories/FlashcardActions.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardAudioButtons.stories.tsx[2m [ src/stories/FlashcardAudioButtons.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/FlashcardText.stories.tsx[2m [ src/stories/FlashcardText.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/GrammarReport.stories.tsx[2m [ src/stories/GrammarReport.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/Header.stories.js[2m [ src/stories/Header.stories.js ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/Navbar.stories.tsx[2m [ src/stories/Navbar.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/Page.stories.js[2m [ src/stories/Page.stories.js ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/Sidebar.stories.tsx[2m [ src/stories/Sidebar.stories.tsx ][22m
[41m[1m FAIL [22m[49m [30m[45m storybook (chromium) [49m[39m src/stories/TailwindTest.stories.jsx[2m [ src/stories/TailwindTest.stories.jsx ][22m
[31m[1mError[22m: Failed to import test file /Users/elena/Developer/ProfeAI/frontend/.storybook/vitest.setup.js[39m
[31m[1mCaused by: TypeError[22m: Failed to fetch dynamically imported module: http://localhost:63315/Users/elena/Developer/ProfeAI/frontend/.storybook/vitest.setup.js?import&browserv=1770146546815[39m
[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/15]‚éØ[22m[39m


[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 1 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m [30m[43m 0 [49m[39m src/tests/flashcard/useTTS.test.ts[2m > [22museTTS[2m > [22musa backend TTS cuando est√° disponible
[31m[1mAssertionError[22m: expected "bound bound fetch" to be called with arguments: [ '/tts', ObjectContaining{‚Ä¶} ][90m

Received: 

[1m  1st bound bound fetch call:

[22m[33m@@ -1,9 +1,9 @@[90m
[2m  [[22m
[32m-   "/tts",[90m
[32m-   ObjectContaining {[90m
[32m-     "body": "{\"text\":\"Hello\",\"language\":\"es\",\"options\":{}}",[90m
[31m+   "/api/tts",[90m
[31m+   {[90m
[31m+     "body": "{\"text\":\"Hello\",\"language\":\"es\",\"uid\":\"test-uid\",\"options\":{}}",[90m
[2m      "headers": {[22m
[2m        "Content-Type": "application/json",[22m
[2m      },[22m
[2m      "method": "POST",[22m
[2m    },[22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m‚ùØ[22m src/tests/flashcard/useTTS.test.ts:[2m91:23[22m[39m
    [90m 89| [39m    [35mawait[39m result[33m.[39mcurrent[33m.[39m[34mspeak[39m([32m"Hello"[39m)[33m;[39m
    [90m 90| [39m
    [90m 91| [39m    [34mexpect[39m(mockFetch)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                      [31m^[39m
    [90m 92| [39m      [32m"/tts"[39m[33m,[39m
    [90m 93| [39m      expect[33m.[39m[34mobjectContaining[39m({

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/15]‚éØ[22m[39m


[2m Test Files [22m [1m[31m15 failed[39m[22m[2m | [22m[1m[32m9 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (25)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m48 passed[39m[22m[2m | [22m[33m3 skipped[39m[90m (52)[39m
[2m   Start at [22m 20:22:22
[2m   Duration [22m 5.78s[2m (transform 1.09s, setup 1.82s, import 3.11s, tests 519ms, environment 3.99s)[22m

npm error Lifecycle script `test:coverage:check` failed with error:
npm error code 1
npm error path /Users/elena/Developer/ProfeAI/frontend
npm error workspace profe-ai@1.0.0
npm error location /Users/elena/Developer/ProfeAI/frontend
npm error command failed
npm error command sh -c vitest run --coverage
